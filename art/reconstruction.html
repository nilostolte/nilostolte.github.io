<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<title>Nilo Stolte Graphics - Vector Art</title>
<link rel="icon" type="image/x-icon" href="art-favicon.svg">
<meta name="keywords" content="vector creations, logos, labels, icons, widgets, advertisements, beer labels, illustrations, graphics designs, vector graphics">
<meta name="description" content="Is your app prepared for tomorrow's resolutions? We offer services and promote vector graphics primitives for the development of interfaces (UI, GUI) on desktops, mobile, web, and embedded systems. The objective is better portability across different platforms and languages, as well as a better solution for different displays resolutions. ">
<meta name="author" content="Nilo Stolte">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

</script>
<link rel="stylesheet" type="text/css" href="/nilo.css">
</head>

<body>
   <div id="wrapper">
      <div id="header">
         <div style="margin: 0.5% 0 0 0;"></div>
         <div title="Click here to know about Nilo Stolte Graphics&#10;Click circles below to go to other sections" class="title-text">
            <a href="../about">NILO STOLTE <span style="color: rgb(59,199,211)";>GRAPHICS</span></a>
         </div>
         <div class="social">
            <a title="Send me an email" href="https://linktr.ee/nilostolte"><img src="/resources/email-logo.svg" style="width:21.3%; height:21.3%;  padding-right: 5.2%;"></a><a title="Follow me on Twitter" href="https://twitter.com/nilostolte"><img src="/resources/twitter-logo.svg" style="width:21.3%; height:21.3%;  padding-right: 5.2%;"></a><a title="Go to my GitHub" href="https://github.com/nilostolte"><img src="/resources/github-logo.svg" style="width:21.3%; height: 21.3%; ;"></a><a title="Go to my Dev account" href="https://dev.to/nilostolte"><img src="/resources/dev-logo.svg" style="width:19.8%; height: 19.8%; padding-left: 5.9%;"></a>
         </div>
         <div style="margin-left: 50%; font-size: 0;">
            <div style="margin: .7vw 0 0 -7.5vw;">
               <div style="width: 15vw;">
                  <svg viewBox="0 0 1540 114" overflow="visible">
                     <g transform="translate(20,0)">
                        <path fill="rgb(47,62,81)" d="M0 30 L-20 50 L0 70 L20 50 Z"/>
                        <path fill="rgb(47,62,81)" d="M0 30 L-20 50 L0 70 L20 50 Z" transform="translate(300,0)"/>
                        <path fill="rgb(47,62,81)" d="M0 30 L-20 50 L0 70 L20 50 Z" transform="translate(600,0)"/>
                        <path fill="rgb(47,62,81)" d="M0 30 L-20 50 L0 70 L20 50 Z" transform="translate(900,0)"/>
                        <path fill="rgb(47,62,81)" d="M0 30 L-20 50 L0 70 L20 50 Z" transform="translate(1200,0)"/>
                        <path fill="rgb(47,62,81)" d="M0 30 L-20 50 L0 70 L20 50 Z" transform="translate(1500,0)"/>
                        <circle cx="150" cy="50" r="57" fill="rgb(152,202,62)"/>
                        <circle cx="450" cy="50" r="57" fill="rgb(181,172,90)"/>
                        <circle cx="750" cy="50" r="57" fill="rgb(228, 168, 146)"/>
                        <circle cx="1050" cy="50" r="57" fill="rgb(64,184,150)"/>
                        <circle cx="1350" cy="50" r="57" fill="rgb(59,199,211)"/>
                     </g>
                  </svg>
               </div>
            </div>
         </div>
         <div style="margin-bottom:5%;"></div>
      </div>
      <div id="twocolumns">
         <div id="leftside">
            <p title="Vector Art" style="text-align: center;">
               <img style="width:60%;" src="art-icon.svg">
            </p>
         </div>
         <div id="rightside">
            <h1>Vector Reconstruction Example</h1>
            <p> In the vector reconstruction example below the flames generation was semi-automated using PostScript and the flame shape refined
                in Illustrator. In the original design the flames don't have all the same shape, as expected in a handmade artwork like this. The
                first thought was to "easily" generate the path for all the flames in PostScript, just picking one flame from one position and
                trying to redraw and close the circle by rotating it by <span style="font-family: italic;">40°÷3</span> at each step.
            </p>
            <div style="text-align: center; margin: 0 0 2% 0"><img src="king-crimson-larks-original.svg"  width="90%"></div>
            <p> Obviously, there is a particular translation to be done after rotating each flame to make the next flame fit in the predetermined
                circular trajectory. Instead of calculating this exact translation one can use a near binary search trial and error approach to
                find the <span style="font-family: italic;">x</span> and <span style="font-family: italic;">y</span> components of this translation. In addition, the fact that the interior part of the pattern must
                fit in a predetermined circle with a certain radius serves as a feedback loop refinement to quickly find the answers. 
	    </p>
	    <p> Once the endpoint and the starting point are real close to each other this iteration can stop, but the initial point don't actually
                coincide with the endpoint. The black point and its coordinates <span style="font-family: italic;">(213.686, 37.8411)</span> correspond to the path endpoint, and
                those in red color with coordinates <span style="font-family: italic; color: #FF0000">(206.373, 35.5591)</span> correspond to the initial flame
                point coordinates:	    
	    </p>
	    <div style="text-align: center; margin: 0 0 0 0"><img src="sun-endpoint.svg"  width="70%"></div><br>
            <p> Observing that from the second flame forward each flame's first point actually coincides with the endpoint of the previous one by
                design (because we chain the rest of the path in a loop - see the PostScript program below), we conclude that we have to do the
                same with the initial flame's first point, that is, we simply make it equal to the endpoint. In other words, we modify its initial
                coordinates in the program to <span style="font-family: italic;">(213.686, 37.8411)</span>. The result is shown in the figure below: 
            </p>
	    <div style="text-align: center; margin: 0 0 0 0"><img src="sun-error.svg"  width="90%"></div>
            <p>Finally, this is the <a style="font-family: semibold;" href="sun-algorithm.ps">PostScript code</a> that produces this closed path:</p><br>
            <div style="text-align: center; margin: 0 0 0 0"><a href="sun-algorithm.ps"><img src="sun-algorithm.svg"  width="90%"></a></div><br>
	    <p>This a very simple way to obtain shapes that are composed by a template shape rotated until the endpoints meet. What's interesting is
                that we can use templates with their original absolute coordinates. These coordinates will only affect the values of the
                <span style="font-family: italic;">x</span> and <span style="font-family: italic;">y</span> components of the translation vector. The
                incremental angle for each rotation only affects the number of template copies, which in this case is known in advance to be 27 thanks
                to the original artwork.
            </p>
            <p >Most of the PostScript code is just for the template (the flame). The first point set before the for loop is the same as the last
                point <span style="font-family: italic;">(206.373, 35.5591)</span>. The initial translation and scale is just to adjust to the page.
                The pop deletes the for counter. Finally:
            </p><br>
            <p style="font-family: italic;"> 13.333333° ≅ 360° ÷ 27</p><br>
            <p>The template shape was first obtained by using one of the flames of the original artwork that was automatically vectorized. Once this
               shape was extracted it was tried by pasting it within the program above. It was actually interesting to see that this shape didn't
               look correct when it was used for all the flames. That's the reason why it was refined by hand using Illustrator.
            </p>
            <p>The problem of using Illustrator in this process was that even though only few outer points were modified the resulting EPS file
               generated by Illustrator revealed significant differences in every point coordinate. This is because Illustrator surprisingly
               applies a different translation to the shape at each time it was modified. This means that all the points in the curves needed to
               be translated back in such a way that the first and final point would be the same as in the initial shape.
            </p> 
            <p> In order to avoid rounding error fixed point integer arithmetic was used instead of floating point arithmetic. This was done
               manually by placing the numbers in an array in the <a style="font-family: semibold;" href="flame3-to-sun.c">C program</a> below:
            </p><br>
            <div style="text-align: center; margin: 0 0 0 0"><a href="flame3-to-sun.c"><img src="c-code.svg"  width="90%"></a></div><br>
            <p> The first line in the array is just the initial point of the template shape. The other four coordinates are just zeros, since they
               only make sense to represent the Bézier curves of the shape in the following lines uniformly.
            </p>
            <p> The program first determines the translation vector by subtracting the original coordinates of the first point of the template
              shape from the coordinates of the obtained points in the EPS file generated by illustrator after modifying the shape. These
              modifications never alter the initial point. Therefore, since no other transformations such as scaling or translations are ever
              applied, both points must be always identical. That's why it's used to determine the automatic translation done by Illustrator.
            </p>
            <p> Then, the program applies the translation to all the other points as shown in the code above, and prints the result, which are
               the following, after manually aligning them:
            </p><br>
            <div style="text-align: center; margin: 0 0 0 0"><img src="translated-points.svg"  width="90%"></div><br>
            <p> The initial point and the first Bézier curve are eliminated from the template since it actually corresponds to a part of the
               previous flame, resulting in only six following Bézier curves and the new initial point, which is the last point of the
               eliminated Bézier curve: <span style="font-family: italic; color: #FF8000">(206.373, 35.5591)</span>. Even this initial point
               is eliminated and substituted by the endpoint of the path <span style="font-family: italic;">(213.68, 37.8411)</span> after the
               entire pattern is generated with the PostScript program above as explained previously.
            </p><a name="reproduction"></a><br><br>
		 
	    <h1 title="Vector Reproduction">Vector Reproduction Example</h1>
            <p>
            </p>
            <div style="text-align: center; margin: 0 0 0 0"><img src="ternary-plot.svg"  width="90%"></div>
            <p> This example of vector reproduction starts by simply drawing an equilateral triangle. The PostScript code below shows this part
               defined as an independent program. It draws a triangle, although <span style="font-family: italic;">polygon</span> function
               actually draws any polygon based on the array of points passed to it. Function <span style="font-family: italic;">trig</span>
               pushes the triangle points on the stack based on the size passed as a parameter. '[' and ']' define an array with the points
               generated by <span style="font-family: italic;">trig</span>:
            </p><br>
            <div style="text-align: center; margin: 0 0 0 0"><img src="draw-polygon.svg"  width="90%"></div><br>
            <p> Functions like <span style="font-family: italic;">polygon</span> are of the kind "<span style="font-family: italic;">write once,
               use everywhere</span>." This means that the function is not supposed to have its internal content understood or to be modified, it
               simply works as a function in a library that's not meant to be modified. Function <span style="font-family: italic;">trig</span> is
               an intermediate type of function. This function helps thinking about polygons in a quite simple way. Here it defines the three points
               of a triangle starting at the origin. That's why we need the <span style="font-family: italic;">translate</span> to be able to place
               it elsewhere. But we could also think in terms of an pentagon or an hexagon in the same way. In the case of a pentagon, it could be
               defined in this way:
            </p><br>
            <div style="text-align: center; margin: 0 0 0 0"><img src="penta.svg"  width="90%"></div><br>
            <p> With this heuristic any regular polygon with the same side size defined like this would have the same first two points, have
               many symmetrical points, and polygons with odd number of sides will always have the abscissa of its highest point with half of
               the side size.
            </p>
            <p> The large gray lines inside the triangle are generated in the following part below, together with the texts. The array <span style=
               "font-family: italic;">num</span> contains the strings (its definition is shown at the end of this section) and <span style=
               "font-family: italic;">indx</span> is used to index it. <span style="font-family: italic;">inc</span> is the increment for the <span
               style="font-family: italic;">x</span> coordinates of the lines. This code is for the bottom part of the triangle. The other sides use
               a similar logic.
            </p><br>
            <div style="text-align: center; margin: 0 0 0 0"><img src="inside-lines.svg"  width="90%"></div><br>
            <p> The main idea from this point on is to use PostScript as a script language. The <span style="font-family: italic;">repeat</span>
               commands for example, greatly simplify loops. There was not too much concern with structure here. Simple and often repeated
               statements are actually what makes this and the following parts easy to write. Opportunism is clearly intentional. The addition
               of the text in this and the other pieces of code is proof of this concept. The use of <span style="font-family: italic;">gsave
               </span> and <span style="font-family: italic;">grestore</span> allows taking advantage of the current point set by the <span 
               style="font-family: italic;">moveto</span> (or <span style="font-family: italic;">lineto</span> in other parts) commands in
               the loop and to use rotations without the concern of affecting what comes after the <span style="font-family: italic;"
               >grestore</span>. The use of a special index (<span style="font-family: italic;">indx</span>) for the text makes it easy to
               use the correct string for each iteration without interfering with the <span style="font-family: italic;">repeat</span> loop.
               Code is highly informal, quite improvised, you write as you go. It not only works, but one can also copy, paste and modify the
               code according to the needs of the other parts that follow.
            </p>
            <p> The small lines making the little measures around the triangle is generated in this part below. Again, this code is for
               the bottom part of the triangle. The other sides use a similar logic.
            </p><br>
            <div style="text-align: center; margin: 0 0 0 0"><img src="small-lines.svg"  width="90%"></div><br>
            <p> We can see here an extremely straightforward code, highly inspired in the style of the previous part but with even less concern
               in repeating code. Actually the repetition here is even intentional to give more clarity to the code. Notice that all the code so
               far is heavily reliant on the triangle definition as seen in <span style="font-family: italic;">trig</span> function. We see the
               same values reappearing quite often. That's the reason why some values are pre-calculated. The structure here, though, is more
               obvious, thanks to the repetition. The exterior <span style="font-family: italic;">repeat</span> loop is responsible for making
               the measure marks at each one of the ten subdivisions. The two interior loops deal with the four lines before and after the
               middles lines, which are themselves drawn between these both loops.
            </p>
            <p> The size of the lines are parameterized by the variable <span style="font-family: italic;">subl</span> which is set here with a
               5 pt size. The middle lines are twice as long (<span style="font-family: italic;">msub</span>). The sub increments (<span style
               ="font-family: italic;">iinc</span>) are a tenth of the size of the large lines original increment, which is quite expected. The
               <span style="font-family: italic;">x</span> and <span style="font-family: italic;">y</span> coordinates of the lines starting
               points are stored in the stack (starting with "0 0", the origin) and at each new line the <span style="font-family: italic;">x
               </span>coordinate is incremented (<span style="font-family: italic;">exch iinc add exch</span>) and both coordinates are copied
               for each <span style="font-family: italic;">moveto</span>. The lines are drawn using a relative <span style="font-family: italic;"
               >lineto</span> to simplify the logic, by being independent of the absolute coordinates stored in the stack.
            </p>
            <p> The final part of the code is for drawing the arrows. The <span style="font-family: italic;">arr</span> procedure was reused from
               previous projects and the values are directly written in it except for the dimensions of the arrow head that are twice the original
               size. Notice the rotations and translations to correctly place each arrow.<br>
            </p><br>
            <div style="text-align: center; margin: 0 0 0 0"><img src="arrows.svg"  width="90%"></div><br>
            <p> The complete code can be found <span style="font-family: semibold;"><a href="triangles.ps">here</a></span>.</p>
         </div>
         <div class="col"></div>
         <!-- col one and two supply full length column colours and borders and hold not content -->
         <div class="col two"></div>
      </div>
      <div id="footer">
         <!-- <p>Footer</p> -->
      </div>
   </div>
</body>
</html>
